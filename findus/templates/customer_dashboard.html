{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>FindUs</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{% static 'assets/css/main.css' %}" rel="stylesheet">

  <!-- =======================================================
  * Template Name: HomeSpace
  * Template URL: https://bootstrapmade.com/homespace-bootstrap-real-estate-template/
  * Updated: Jul 05 2025 with Bootstrap v5.3.7
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<style>

     /* Dashboard Tabs Styles - Updated for <a> tags */
.dashboard-tabs {
    display: flex;
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-bottom: 20px;
    overflow: hidden;
}

/* Property Agent Info Styles */
.property-agent-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    border-top: 1px solid #e9ecef;
    margin-top: 1rem;
}

.property-agent-info .property-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    text-decoration: none;
    color: inherit;
    flex: 1;
}

.property-agent-info .property-link:hover {
    color: inherit;
    text-decoration: none;
}

.agent-avatar {
    position: relative;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    overflow: hidden;
}

.agent-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.verified-badge-sm {
    position: absolute;
    bottom: -2px;
    right: -2px;
    background: white;
    border-radius: 50%;
    padding: 2px;
    color: #007bff;
    font-size: 0.8rem;
}

.location-banner {
    border-left: 4px solid #077f46;
    background: #e6f5ec;
}

.location-banner .btn {
    white-space: nowrap;
}

.agent-details {
    flex: 1;
}

.agent-details strong {
    display: block;
    font-size: 0.9rem;
    margin-bottom: 0.1rem;
}

.agent-details span {
    font-size: 0.8rem;
    color: #6c757d;
    display: block;
    margin-bottom: 0.2rem;
}

.agent-details .rating {
    font-size: 0.75rem;
}

.agent-contact {
    display: flex;
    gap: 0.5rem;
}

.contact-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 35px;
    height: 35px;
    border: 1px solid #e9ecef;
    border-radius: 6px;
    color: #6c757d;
    text-decoration: none;
    transition: all 0.3s ease;
}

.contact-btn:hover {
    background: #077f46;
    color: white;
    border-color: #077f46;
    text-decoration: none;
}

.dashboard-tabs .tab {
    flex: 1;
    padding: 15px 0;
    text-align: center;
    background: transparent;
    cursor: pointer;
    font-weight: 600;
    color: #6c757d;
    transition: all 0.3s ease;
    border-bottom: 3px solid transparent;
    font-size: 0.95rem;
    text-decoration: none;
    display: block; /* Important for proper spacing */
}

.dashboard-tabs .tab i {
    margin-right: 8px;
    font-size: 1.2rem;
    vertical-align: middle;
}

.dashboard-tabs .tab.active {
    color: #077f46;
    border-bottom: 3px solid #077f46;
    background-color: #e6f5ec;
}

.dashboard-tabs .tab:hover:not(.active) {
    background-color: #e9ecef;
}

/* Service meta badges */
.service-meta {
    margin: 10px 0;
}

.service-meta .badge {
    margin-right: 5px;
    font-size: 0.7rem;
    padding: 4px 8px;
}

/* Service features tags */
.service-features {
    margin: 10px 0;
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
}

.feature-tag {
    background: #e9ecef;
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    color: #6c757d;
    border: 1px solid #dee2e6;
}

/* Service description */
.service-description {
    font-size: 0.9rem;
    color: #6c757d;
    line-height: 1.4;
}

/* Agent details enhancements */
.agent-details small {
    display: block;
    margin-top: 2px;
}

/* Service actions */
.service-actions .btn {
    font-size: 0.875rem;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .service-meta .badge {
        font-size: 0.65rem;
        padding: 3px 6px;
    }
    
    .feature-tag {
        font-size: 0.7rem;
        padding: 2px 6px;
    }
    
    .service-actions .btn {
        font-size: 0.8rem;
    }
}

/* Hover effects */
.property-item:hover .service-actions {
    opacity: 1;
    transform: translateY(0);
}

.service-actions {
    opacity: 0.9;
    transform: translateY(5px);
    transition: all 0.3s ease;
}

/* Responsive Design - Unchanged */
@media (max-width: 768px) {
    .dashboard-tabs {
        flex-direction: column;
    }
    
    .dashboard-tabs .tab {
        padding: 12px;
        border-bottom: none;
        border-right: 3px solid transparent;
        text-align: left;
        padding-left: 20px;
    }
    
    .dashboard-tabs .tab.active {
        border-bottom: none;
        border-right: 3px solid #077f46;
    }
}

</style>

<body class="properties-page">

  

  <main class="main">
    <div class="dashboard-tabs">
        <a href="{% url 'customer_profile' %}" class="tab active">
            <i class="bi bi-person-circle"></i> My Profile
        </a>
        
        <a href="{% url 'customer_dashboard' %}" class="tab">
            <i class="bi bi-tools"></i> Services
        </a>
        
        <a href="{% url 'saved_services' %}" class="tab">
            <i class="bi bi-rocket"></i> Saved Services
        </a>
    </div>

    

    <!-- Properties Section -->
    <section id="properties" class="properties section">

      
<div class="container" data-aos="fade-up" data-aos-delay="100">

    {% if not user_state and not request.GET.location %}
<div class="location-banner alert alert-info mb-4">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <i class="bi bi-geo-alt me-2"></i>
            <strong>Find services near you</strong>
            <p class="mb-0">Allow location access to see craftsmen in your area</p>
        </div>
        <button class="btn btn-primary" onclick="requestLocation(event)">
            <i class="bi bi-crosshair me-1"></i> Detect My Location
        </button>
    </div>
</div>
{% endif %}

    <!-- Search and Filter Bar -->
    <div class="search-bar mb-5" data-aos="fade-up" data-aos-delay="150">
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <div class="search-wrapper">
                    <form method="get" action="{% url 'customer_dashboard' %}">
                        <div class="row g-3">
                            <!-- Location -->
                            <div class="col-lg-3 col-md-6">
                                <div class="search-field">
                                    <label>Location</label>
                                    <input type="text" class="form-control" name="location" placeholder="Enter city or zip" value="{{ request.GET.location }}">
                                </div>
                            </div>
                            
                            <!-- Service Type -->
                            <div class="col-lg-2 col-md-6">
                                <div class="search-field">
                                    <label>Service Type</label>
                                    <select class="form-select" name="category">
                                        <option value="">Any Type</option>
                                        {% for value, label in available_categories %}
                                            <option value="{{ value }}" {% if selected_category == value %}selected{% endif %}>
                                                {{ label }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Price Type -->
                            <div class="col-lg-2 col-md-6">
                                <div class="search-field">
                                    <label>Price Type</label>
                                    <select class="form-select" name="price_type">
                                        <option value="">Any Price Type</option>
                                        <option value="hourly" {% if selected_price_type == 'hourly' %}selected{% endif %}>Hourly Rate</option>
                                        <option value="fixed" {% if selected_price_type == 'fixed' %}selected{% endif %}>Fixed Price</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Availability -->
                            <div class="col-lg-2 col-md-6">
                                <div class="search-field">
                                    <label>Availability</label>
                                    <select class="form-select" name="availability">
                                        <option value="">Any Availability</option>
                                        {% for value, label in availability_choices %}
                                            <option value="{{ value }}" {% if selected_availability == value %}selected{% endif %}>
                                                {{ label }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Job Size -->
                            <div class="col-lg-2 col-md-6">
                                <div class="search-field">
                                    <label>Job Size</label>
                                    <select class="form-select" name="job_size">
                                        <option value="">Any Size</option>
                                        {% for value, label in job_size_choices %}
                                            <option value="{{ value }}" {% if selected_job_size == value %}selected{% endif %}>
                                                {{ label }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Search Button -->
                            <div class="col-lg-1 col-md-12">
                                <div class="search-field">
                                    <label>&nbsp;</label>
                                    <button class="btn btn-primary w-100 search-btn" type="submit">
                                        <i class="bi bi-search"></i> 
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Advanced Filters Row -->
                        <div class="row g-3 mt-2">
                            <!-- Price Range -->
                            <div class="col-lg-3 col-md-6">
                                <div class="search-field">
                                    <label>Price Range</label>
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <input type="number" class="form-control" name="min_price" placeholder="Min $" value="{{ selected_min_price }}">
                                        </div>
                                        <div class="col-6">
                                            <input type="number" class="form-control" name="max_price" placeholder="Max $" value="{{ selected_max_price }}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Features -->
                            <div class="col-lg-4 col-md-6">
                                <div class="search-field">
                                    <label>Features</label>
                                    <select class="form-select" name="features" multiple>
                                        {% for value, label in features_choices %}
                                            <option value="{{ value }}" {% if value in selected_features %}selected{% endif %}>
                                                {{ label }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                    <small class="form-text text-muted">Hold Ctrl to select multiple</small>
                                </div>
                            </div>
                            
                            <!-- Materials Included -->
                            <div class="col-lg-2 col-md-6">
                                <div class="search-field">
                                    <label>&nbsp;</label>
                                    <div class="form-check mt-2">
                                        <input class="form-check-input" type="checkbox" name="materials_included" id="materials_included" {% if selected_materials_included %}checked{% endif %}>
                                        <label class="form-check-label" for="materials_included">
                                            Materials Included
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Clear Filters -->
                            <div class="col-lg-3 col-md-6">
                                <div class="search-field">
                                    <label>&nbsp;</label>
                                    <a href="{% url 'customer_dashboard' %}" class="btn btn-outline-secondary w-100">
                                        <i class="bi bi-arrow-clockwise"></i> Clear Filters
                                    </a>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    

            <!-- Results Header -->
<!-- Results Header -->
<div class="results-header mb-4">
    <div class="row align-items-center">
        <div class="col-lg-6">
            <div class="results-info">
                <h5>{{ page_obj.paginator.count }} Services Found</h5>
                <p class="text-muted">
                    {% if user_state %}
                        <i class="bi bi-geo-alt-fill text-primary"></i>
                        Showing services in <strong>{{ user_state }}</strong>
                    {% else %}
                        <i class="bi bi-globe text-muted"></i>
                        Showing services worldwide
                    {% endif %}
                </p>
            </div>
        </div>
    </div>
</div>
            <div class="col-lg-6">
                <div class="results-controls">
                    <div class="d-flex gap-3 align-items-center justify-content-lg-end">
                        <div class="sort-dropdown">
                            <form method="get" id="sort-form">
                                <!-- Preserve all existing filters -->
                                <input type="hidden" name="category" value="{{ selected_category }}">
                                <input type="hidden" name="price_type" value="{{ selected_price_type }}">
                                <input type="hidden" name="location" value="{{ request.GET.location }}">
                                <input type="hidden" name="availability" value="{{ selected_availability }}">
                                <input type="hidden" name="job_size" value="{{ selected_job_size }}">
                                <input type="hidden" name="min_price" value="{{ selected_min_price }}">
                                <input type="hidden" name="max_price" value="{{ selected_max_price }}">
                                <input type="hidden" name="materials_included" value="{{ selected_materials_included }}">
                                {% for feature in selected_features %}
                                    <input type="hidden" name="features" value="{{ feature }}">
                                {% endfor %}
                                
                                <select class="form-select form-select-sm" name="sort" onchange="document.getElementById('sort-form').submit()">
                                    <option value="">Newest First</option>
                                    <option value="price_low_high" {% if selected_sort == 'price_low_high' %}selected{% endif %}>Price: Low to High</option>
                                    <option value="price_high_low" {% if selected_sort == 'price_high_low' %}selected{% endif %}>Price: High to Low</option>
                                    <option value="rating" {% if selected_sort == 'rating' %}selected{% endif %}>Highest Rated</option>
                                </select>
                            </form>
                        </div>
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="masonry">
                                <i class="bi bi-grid"></i>
                            </button>
                            <button class="view-btn" data-view="rows">
                                <i class="bi bi-view-stacked"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Services Container -->
    <div class="properties-container">
        <div class="properties-masonry view-masonry active" data-aos="fade-up" data-aos-delay="250">
            <div class="row g-4">
                {% for service in page_obj %}
                <div class="col-lg-4 col-md-6">
                    <div class="property-item">
                        <a href="{% url 'service_detail' service.id %}" class="property-link">
                            <div class="property-image-wrapper">
                                {% if service.image %}
                                    <img src="{{ service.image.url }}" alt="" class="img-fluid" style="height: 250px; object-fit: cover;">
                                {% else %}
                                    <img src="{% static 'assets/img/default-service.jpg' %}" alt="Default service" class="img-fluid" style="height: 250px; object-fit: cover;">
                                {% endif %}
                                <div class="property-status">
                                    <span class="status-badge featured">Featured</span>
                                    <span class="status-badge {% if service.price_type == 'hourly' %}sale{% else %}rent{% endif %}">
                                        {{ service.get_price_type_display }}
                                    </span>
                                </div>
                                
                            </div>
                        </a>
                        <div class="property-details">
                            <a href="{% url 'service_detail' service.id %}" class="property-link">
                                <div class="property-header">
                                    <div class="property-price">
                                        {% if service.price_type == 'hourly' %}
                                            ${{ service.hourly_rate }}/hour
                                        {% else %}
                                            ${{ service.fixed_price }} fixed
                                        {% endif %}
                                        {% if service.travel_fee %}
                                            <small class="text-muted">+ ${{ service.travel_fee }} travel</small>
                                        {% endif %}
                                    </div>
                                    <div class="property-type">{{ service.get_category_display }}</div>
                                </div>
                                <h4 class="property-title">{{ service.title }}</h4>
                                <p class="property-address">
                                    <i class="bi bi-geo-alt"></i>
                                    {{ service.craftsman.city }}, {{ service.craftsman.state }}
                                </p>
                                
                                <!-- New Service Details -->
                                <div class="service-meta">
                                    <span class="badge bg-info">{{ service.get_availability_display }}</span>
                                    <span class="badge bg-secondary">{{ service.get_job_size_display }}</span>
                                    {% if service.materials_included %}
                                        <span class="badge bg-success">Materials Included</span>
                                    {% endif %}
                                </div>
                                
                                <div class="property-specs">
                                    <div class="spec-item">
                                        <i class="bi bi-clock"></i>
                                        <span>{{ service.estimated_duration }}</span>
                                    </div>
                                    {% if service.price_type == 'hourly' and service.min_hours %}
                                    <div class="spec-item">
                                        <i class="bi bi-hourglass-split"></i>
                                        <span>Min {{ service.min_hours }} hrs</span>
                                    </div>
                                    {% endif %}
                                    <div class="spec-item">
                                        <i class="bi bi-star"></i>
                                        <span><i class="bi bi-star-fill"></i> {{ service.avg_rating|floatformat:1 }} ({{ service.review_count }})</span>
                                    </div>
                                </div>
                                
                                <!-- Service Features -->
                                {% if service.features %}
                                <div class="service-features">
                                    {% for feature in service.features %}
                                        <small class="feature-tag">{{ feature }}</small>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </a>
                            <div class="property-agent-info">
                                <a href="{% url 'craftsman_public_profile' service.craftsman.id %}" class="property-link">
                                    <div class="agent-avatar">
                                        {% if service.craftsman.profile_photo %}
                                            <img src="{{ service.craftsman.profile_photo.url }}" alt="{{ service.craftsman.business_name }}">
                                        {% else %}
                                            <img src="{% static 'assets/img/default-avatar.jpg' %}" alt="Default avatar">
                                        {% endif %}
                                        {% if service.craftsman.is_verified %}
                                            <span class="verified-badge-sm">
                                                <i class="bi bi-patch-check-fill"></i>
                                            </span>
                                        {% endif %}
                                    </div>
                                    <div class="agent-details">
                                        <strong>{{ service.craftsman.business_name }}</strong>
                                        <span>{{ service.craftsman.get_service_category_display }}</span>
                                        <small class="rating">
                                            <i class="bi bi-star-fill text-warning"></i>
                                            {{ service.craftsman.rating|default:"4.5" }}
                                            <span class="text-muted">({{ service.craftsman.review_count|default:"0" }})</span>
                                        </small>
                                    </div>
                                </a>
                                <div class="agent-contact">
                                    <a href="tel:{{ service.craftsman.phone }}" class="contact-btn" data-toggle="tooltip" title="Call {{ service.craftsman.business_name }}">
                                        <i class="bi bi-telephone"></i>
                                    </a>
                                    <a href="{% url 'craftsman_public_profile' service.craftsman.id %}" class="contact-btn" data-toggle="tooltip" title="View Profile">
                                        <i class="bi bi-person"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% empty %}
<div class="col-12">
    <div class="text-center py-5">
        <i class="bi bi-search display-1 text-muted"></i>
        <h4 class="mt-3">
            {% if user_state %}
                No services found in {{ user_state }}
            {% else %}
                No services found
            {% endif %}
        </h4>
        <p class="text-muted">
            {% if user_state %}
                No craftsmen available in your area yet
            {% else %}
                Try adjusting your search filters
            {% endif %}
        </p>
        <a href="{% url 'customer_dashboard' %}" class="btn btn-primary">
            Clear All Filters
        </a>
    </div>
</div>
{% endfor %}
            </div>
        </div>
    </div>

    <!-- Pagination -->
    {% if page_obj.has_other_pages %}
    <nav class="pagination-wrapper mt-5" data-aos="fade-up" data-aos-delay="350">
        <div class="row justify-content-between align-items-center">
            <div class="col-lg-6">
                <div class="pagination-info">
                    <p>
                        Showing <strong>{{ page_obj.start_index }}-{{ page_obj.end_index }}</strong> 
                        of <strong>{{ page_obj.paginator.count }}</strong> services
                    </p>
                </div>
            </div>
            <div class="col-lg-6">
                <ul class="pagination justify-content-lg-end">
                    {% if page_obj.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page=1{% if querystring %}&{{ querystring }}{% endif %}">
                                <i class="bi bi-chevron-left"></i>
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <a class="page-link" href="#">
                                <i class="bi bi-chevron-left"></i>
                            </a>
                        </li>
                    {% endif %}

                    {% for num in page_obj.paginator.page_range %}
                        {% if page_obj.number == num %}
                            <li class="page-item active"><a class="page-link" href="#">{{ num }}</a></li>
                        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ num }}{% if querystring %}&{{ querystring }}{% endif %}">
                                    {{ num }}
                                </a>
                            </li>
                        {% endif %}
                    {% endfor %}

                    {% if page_obj.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if querystring %}&{{ querystring }}{% endif %}">
                                <i class="bi bi-chevron-right"></i>
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <a class="page-link" href="#">
                                <i class="bi bi-chevron-right"></i>
                            </a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    {% endif %}

</div>

    </section><!-- /Properties Section -->

  </main>

  <footer id="footer" class="footer accent-background">

   

   

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

<script>
    function requestLocation(event) {
        event.preventDefault();
        console.log("üìç Location button clicked!");
        
        if (navigator.geolocation) {
            // Show loading
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="bi bi-hourglass-split me-1"></i> Detecting...';
            button.disabled = true;
            
            navigator.geolocation.getCurrentPosition(
                // Success
                async function(position) {
                    console.log("üéØ Got location:", position.coords);
                    
                    try {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        
                        // Get state from coordinates
                        console.log("üåç Calling geocoding API...");
                        const response = await fetch(
                            `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=en`
                        );
                        const data = await response.json();
                        console.log("üìç Full API response:", data);
                        
                        // Extract state and city
                        const state = data.principalSubdivision || data.region || 'Lagos';
                        const city = data.city || data.locality || 'Lagos';
                        
                        console.log("üìù Extracted - State:", state, "City:", city);
                        
                        if (state) {
                            // SIMPLE VERSION: Just save to session via GET parameter
                            console.log("üíæ Redirecting with location parameter...");
                            window.location.href = `?location=${encodeURIComponent(state)}&auto_detect=true`;
                        } else {
                            alert('Could not determine your location. Please try again.');
                            button.innerHTML = originalText;
                            button.disabled = false;
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        alert('Error processing location: ' + error.message);
                        button.innerHTML = originalText;
                        button.disabled = false;
                    }
                },
                // Error
                function(error) {
                    console.error("‚ùå Location error:", error);
                    alert('Location access denied. Please allow location access to see local services.');
                    button.innerHTML = originalText;
                    button.disabled = false;
                }
            );
        } else {
            alert('Geolocation is not supported by your browser.');
        }
    }
</script>

  <!-- Vendor JS Files -->
  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>
  <script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
  <script src="{% static 'assets/vendor/purecounter/purecounter_vanilla.js' %}"></script>
  <script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js' %}"></script>

  <!-- Main JS File -->
  <script src="{% static 'assets/js/main.js' %}"></script>

</body>

</html>